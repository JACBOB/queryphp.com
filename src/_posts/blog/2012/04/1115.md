title: jQueryboxy弹出层插件中文演示及讲解
date: 2012-04-04 04:58:25
---

http://www.zhangxinxu.com/study/200911/jQuery-plugin-boxy.html<br/><br/>使用该jQuery插件<br/>要想使用该jQuery插件，需要把$(selector).boxy();放在document.ready中。使用合适的选择器表达式替换这里的"selector"，例如："a[rel=boxy],form.with-confirmation"。这会给匹配的元素附加一些行为，如下：<br/>一个href属性中如果锚点包含#，则此锚点相对应的ID的DOM元素的内容就会被添加到boxy对话框中。<br/>如果href锚点内容为其他一些东西，则会试图使用Ajax载入其对应的内容。理想情况下，我们有相同的起源检查和委托对框架的跨域请求。这将会在下面展示。<br/>表单上会显示一个提交模式的确认消息。<br/>其他的元素将会被忽略<br/>试试下面的演示：<br/>1.锚点#对应ID的内容(div#foobar)<br/>对应的ID为fobar的div内容为：<br/><div id="foobar" style="padding:15px; display:none; background-color:#cad5eb; font-size:2em; color:#000000; font-weight:bold;">这是一段ID为foobar的div标签内的文字</div><br/>2.远程内容(加载同文件夹下的test.html)<br/>test.html页面内全部内容为：<br/><div style="padding:15px; font:2em bold Verdana, Geneva, sans-serif">这是名为test的html页面中div内的文字内容</div><br/>3.以确认框方式提交<br/><br/>form表单全部内容：<br/><form method="post" action="" id="form" class="boxy"><input type="submit" name="测试" value="确认框提交" /></form><br/> <br/>基本的插件用法<br/><script type="text/javascript"><br/>	$(function(){<br/>		$(".boxy").boxy();<br/>	});<br/></script><br/>请注意，boxy对话框自动计算出您的内容区域内本身的大小和位置，没有必要明确规定了包装集的尺寸。<br/>此插件方法理解单一选项，其他任何选项被传递给了boxy的构造函数（参见下面的构造函数选项），或是用于Ajax操作，Boxy.load 。<br/>选项描述默认 message显示在对话框上的文字信息请确认：<br/>此外，每个匹配锚title属性将被用来作为其相应的对话框的标题。<br/>手动创建实例<br/>用手动模式使用boxy是很容易的——只需要创建一个boxy的新实例，传递一些内部的内容和任何附加的散列对象。在默认情况下，对话框会立即显示出来，在视角的中心，可拖拽。所有的这些设置都可以通过给构造函数传递附加的对象来进行覆盖——更多详情请参见下面的构造函数选项<br/>传递给构造函数的内容可以是任何有效的参数，jQuery的$()函数- DOM元素，是HTML片断或其他jQuery对象。无论提供的是什么，其display属性均被设置为block，并插入名为boxy-content的class在对话框中。<br/>下面为一些代表性的示例：<br/>创建一个新的对话框，new Boxy("<p>内容……</p>", {title: "对话框"});。<br/>创建一个新对话框，无法拖拽。new Boxy("<p>内容……</p>", {title: "对话框", draggable: false});。<br/>创建一个新的对话框，没有默认的关闭按钮。new Boxy("<p>内容……</p>", {title: "对话框", closeable:false});。<br/>新建对话框，使用absolute绝对定位（跟随滚动条）new Boxy("<p>内容……</p>", {title: "对话框, fixed:false"});。<br/>新建对话框，模态的new Boxy("<p>内容……</p>", {title: "对话框, modal:true"});。<br/>新建对话框，自定义行为new Boxy("<p>内容……</p>", {behaviours: function(r) { $(r).hover(function() { $(this).css("background-color", "red"); }, function() { $(this).css("background-color", "white"); }); }});。<br/>修改现有的对话（先打开一个对话框，然后再单击下面的链接事件）<br/>让最新的对话框放大的动画 - someDialog.tween(400, 400);<br/>让最新的对话框减小的动画 - someDialog.tween(100, 100);<br/>获取最新的对话框的标题 - someDialog.getTitle();。<br/>更改最新的对话框的标题 - someDialog.setTitle("新标题");<br/>请注意，标题栏（也就是关闭按钮和拖动器）只有在标题指定的情况下会出现，在未来，这种行为可能会发生变化，使标题栏始终存在，除非特别禁用。<br/>一旦您创建了一个实例，您可以将通过提供的API分配给一个变量，随后移动，改变大小，显示和隐藏 - 记录如下。<br/>提问<br/>使用Boxy.ask()，Boxy.alert()和Boxy.confirm()这些帮手可能提示用户从一些选项中进行选择以及完成可选的回调函数。点击下面含有演示的链接，参考API文档获取更多信息。<br/>提问 - Boxy.ask() - 用户定义的选项，选择项传递给回调函数<br/>弹出 - Boxy.alert() - 回调函数总是不被调用<br/>确认 - Boxy.confirm() - 仅当用户选择了“确认”时回调函数会被调用<br/><script type='text/javascript'><br/>$(function() {<br/>  $("#ask").click(function() {<br/>    Boxy.ask("你感觉怎么样?", ["好极了", "还好", "不太好"], function(val) {<br/>      alert("你选择的是: " + val);       <br/>    }, {title: "这是一个问题……"});<br/>    return false;<br/>  });<br/>  $("#alert").click(function() {<br/>    Boxy.alert("文件未找到", null, {title: "提示信息"});<br/>    return false;<br/>  });<br/>  $("#confirm").click(function() {<br/>    Boxy.confirm("请确认:", function() { alert("已经确认!"); }, {title: "提示信息"});<br/>    return false;<br/>  });<br/>});<br/></script><br/>API(应用编程接口)<br/>Boxy.load(url, options)<br/>以一个URL加载内容并以Boxy对话框的形式展现。支持以下的一些选项参数：<br/>类型 - HTTP方法，默认为GET<br/>缓存 - 如果是true，缓存内容连续通话。相当于缓存选项传递到jQuery的Ajax方法。默认：false。<br/>过滤 - jQuery的表达式，用于过滤远程内容。<br/>（任何其他指定的选项将被传递到boxy的构造函数中）<br/>Boxy.get(element)<br/>返回包含元素的实例，例如：<a href="#" onclick="Boxy.get(this).hide();">关闭对话框</a><br/>Boxy.ask(question, answers, callback, options)<br/>显示模式，即非可关闭对话框，允许用户选择选项。问题是要显示给用户的信息。答案是一个数组或一切可能的回答的数列。回调函数将收到选定的回答，这是否是需要的值或相应的密钥要根据一个数组或答案数列是否已经提供了。options是一种额外的可选设置选项传递给对话框的构造函数。<br/>Boxy.alert(message, callback, options)<br/>显示模式，非可关闭对话框显示消息给用户。<br/>注意：此方法并不是为了取代浏览器本地window.alert()函数提供，因为它没有能力阻止程序执行，在对话框是可见的时候。<br/>Boxy.confirm(message, callback, options)<br/>显示模式，非可关闭对话框显示的含有确定和取消按钮的消息。回调只会在用户选择了“确定”时被调用。<br/>注意：此方法并不是为了取代浏览器提供的本地window.confirm()函数，因为它没有能力在对话框可见时阻止程序执行的。<br/>Boxy.linkedTo(ele)<br/>返回已通过执行器构造函数选项连接DOM元素的boxy实例。<br/>Boxy.isModalVisible()<br/>返回true如果任何模式对话框是当前可见的，否则返回false。<br/>new Boxy(element, options)<br/>构造函数；创建一个新的boxy对话框。element是对话框的内容；任何有效的参数，jQuery的$()函数在这里也是有效的。options是一个配置选项的散列，见下面详细的资料。<br/>estimateSize()<br/>当对话框不可见的时候估计其大小。如果当前对话框可见，不要使用此方法，使用getSize()代替。<br/>getSize()<br/>以数组的形式[width, height]返回对话框的大小。<br/>getContentSize()<br/>返回对话框内容区域的大小。默认情况下，指在对话框框架里的一切，不包括标题栏。<br/>getPosition()<br/>以[x,y]数组形式返回最顶层对话框的左上角坐标。<br/>getCenter()<br/>以[x,y]数组形式返回最顶层对话框的中心点的坐标。<br/>getInner()<br/>返回一个jQuery对象包装对话框的内部区域-框架内包括标题栏一切。<br/>getContent()<br/>返回一个jQuery对象包装对话框的内容区域-框架内的一切，不包括标题栏。<br/>setContent(newContent)<br/>设置对话框中的内容，任何对$()有效的参数也对设置的新内容有效。可链接。<br/>moveTo(x,y)<br/>移动对话框到左上角为(x,y)的位置，可链接。<br/>centerAt(x,y)<br/>把对话框移动到中心坐标为(x,y)的位置上。<br/>center(axis)<br/>移动对话框，使其在视野的中央。可选参数axis可以是"x","y"中的任意一个中心轴。可链接。<br/>resize(w,h,after)<br/>重新调整对话框的高宽到[w,h]，完成后执行回调函数，回调函数将接受Boxy实例作为参数。可链接。<br/>tween(w,h,after)<br/>动画补间对话框高宽到[w,h]，完成后执行回调函数，回调函数将接受Boxy实例作为参数。可链接。<br/>isVisible()<br/>如果当前对话框可见，则返回true，否则返回false。<br/>show()<br/>显示对话框，可链接。<br/>hide(after)<br/>隐藏对话框，after为可选回调函数，完成后执行。可链接。<br/>toggle()<br/>触发对话框的显隐属性。可链接。<br/>hideAndUnload(after)<br/>在隐藏后立即执行卸载。在卸载之前执行after回调函数。可链接。<br/>unload()<br/>从DOM中删除对话框，切断其与执行机构的联系，如果有的话。一旦出现一个对话框已被卸载它的任何进一步行动都是未定义的。<br/>toTop()<br/>将当前对话框移动到其他所有对话框的上部。可链接。<br/>getTitle()<br/>以HTML的形式返回对话框的标题。<br/>setTitle(t)<br/>设置对话框的标题为t，可链接。<br/>完整的构造函数选项列表<br/>选项描述默认 title显示在自动生成标题栏上的标题null closeable是否一个关闭对话框的驱动器要添加到自动生成标题栏上。如果标题没有指定是没有影响的。 true closeText在可用情况下标题栏关闭链接的文字"[关闭]" draggable是否对话框可以通过标题栏进行拖拽。标题未指定没有影响。true clone内部区域的元素以及事件处理程序应不应该在被替换之前进行复制。false actuatorDOM元素（不包括jQuery对象），引发此对话框。两者之间的联系将被建立，此联系允许对话框的参照稍后在通过执行Boxy.linkedTo(element)获取的元素中进行检索。当对话框被卸载，此联系也会被自动切断。null center对话框是否屏幕中心显示true fixed是否使用固定定位(fixed)而不是绝对定位(absolute)，固定定位的对话框不受浏览器滚动条影响。IE6不支持固定定位，其永远表现为绝对定位。true show对话框是否需要立即显示，如果是false，则需要你手动调用dialog.show()以显示对话框。true modal对话框是否设置为模态。模态时，浏览器背景“黑黑的”，阻止页面的其他元素接受事件。false x对话框的x(left)坐标50 y对话框的y(top)坐标50 unloadOnHide如果是true，则在此对话框隐藏后会被卸载（如从DOM中删除）false clickToFront如果是true，则单击对话框的任意位置（只是相对于标题栏），会导致其跑到顶部。false behaviours函数用来申请对话框内容的自定义行为。每次调用setContent()，且在Boxy对象中的上下文中执行，将接受一个包含内容区域的jQuery对象作为参数。function(r){} afterDrop当对话框放下的时候在Boxy对象的上下文执行回调函数。function(){} afterShow当对话框显示的时候在Boxy对象的上下文执行回调函数。能够用来使表单的文本框获取焦点。function(){} afterHide当对话框隐藏的时候在Boxy对象的上下文执行回调函数。fuuction(){} beforeUnload在对话框卸载前在Boxy对象的上下文执行回调函数。function(){}<br/>CSS选择器<br/>可以通过css完全定制对话框的外观，这里的是您可能感兴趣的选择器列表。<br/>.boxy-wrapper .title-bar<br/>div包装的自动生成的标题栏<br/>.boxy-wrapper .title-bar h2<br/>标题栏的内容<br/>.boxy-wrapper .title-bar.dragging<br/>拖拽时候的标题栏<br/>.boxy-wrapper .title-bar .close<br/>默认的关闭对话框的执行器<br/>.boxy-inner<br/>内部区域，包括标题栏<br/>.boxy-content<br/>内部区域，不包括标题栏。这个class类将被自动添加到传递给Boxy的构造函数的任何元素。<br/>.boxy-wrapper .question<br/>通过Boxy.ask()创建的，包含问题文字<br/>.boxy-wrapper .answers<br/>通过Boxy.ask()创建的，包含应答的按钮<br/>.close<br/>这一class类的任何内容的单击事件将关联到关闭对话框上。<br/>结语<br/>全文由我（张鑫旭）翻译整理自http://onehackoranother.com/projects/jquery/boxy/，时间仓促，难免在翻译或编辑时出现错误或不到位之处，欢迎指正。您可以通过邮箱iamzhangxinxu#qq.com联系我。<br/>此插件js部分以及css部分自己略微修改，一些英文中文化，添加一些class便于样式控制等。这里的源文件为我修改后的版本。最后插上一点点谷歌的广告，嘿嘿o(∩_∩)o。