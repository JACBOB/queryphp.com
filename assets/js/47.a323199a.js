(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{204:function(e,t,r){"use strict";r.r(t);var s=r(21),a=Object(s.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("p",[e._v("QueryPHP 是一个渐进式 PHP 常驻框架，我们强调的是一个渐进式，它既可以运行在 php-fpm 场景，也可以将框架核心编译成 C 扩展，同时还支持在 swoole 服务中运行。")]),e._v(" "),e._m(1),e._v(" "),r("p",[e._v("事实上，QueryPHP 也是一个普通的 PHP 框架，目前最低版本要求 PHP 7.1.3，我们对环境并没有特别的要求。")]),e._v(" "),r("ul",[r("li",[e._v("PHP ^7.1.3")]),e._v(" "),r("li",[e._v("ext-mbstring "),r("a",{attrs:{href:"https://github.com/hunzhiwange/framework/blob/master/src/Leevel/Support/Str.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("字符处理"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("ext-openssl "),r("a",{attrs:{href:"https://github.com/hunzhiwange/framework/blob/master/src/Leevel/Encryption/Encryption.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("加密组件"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("我们系统依赖的组件可以通过 "),r("a",{attrs:{href:"https://github.com/hunzhiwange/queryphp/blob/master/composer.json",target:"_blank",rel:"noopener noreferrer"}},[e._v("composer.json"),r("OutboundLink")],1),e._v(" 找到，我们提供了大量开箱即用的功能。")]),e._v(" "),e._m(2),e._v(" "),r("p",[e._v("对于每位 PHP 工程师来说，您的电脑早已经运行着一个 PHP 7 版本，接着您可以进行安装了。")]),e._v(" "),e._m(3),e._v(" "),r("p",[e._v("QueryPHP 使用 "),r("a",{attrs:{href:"https://getcomposer.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Composer"),r("OutboundLink")],1),e._v(" 来管理整个项目依赖，因此确保您已经安装了 Composer。###")]),e._v(" "),r("p",[e._v("国外镜像访问速度很慢，我们建议通过下面的方式使用国内镜像。")]),e._v(" "),r("ul",[r("li",[e._v("镜像 1 "),r("a",{attrs:{href:"https://pkg.phpcomposer.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://pkg.phpcomposer.com/"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("镜像 2 "),r("a",{attrs:{href:"https://packagist.laravel-china.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://packagist.laravel-china.org"),r("OutboundLink")],1)])]),e._v(" "),e._m(4),r("p",[e._v("或者")]),e._v(" "),e._m(5),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),r("p",[e._v("或者体验开发版本")]),e._v(" "),e._m(10),e._m(11),e._v(" "),r("p",[e._v("你也可以简单实用 PHP 内置的服务器来运行 QueryPHP,当然更好的选择配置 Nginx 站点。")]),e._v(" "),e._m(12),r("ul",[r("li",[e._v("首页 "),r("a",{attrs:{href:"http://127.0.0.1:9527/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:9527/"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Mvc 路由 "),r("a",{attrs:{href:"http://127.0.0.1:9527/api/test",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:9527/api/test"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Mvc restful 路由 http://127.0.0.1:9527/restful/123")]),e._v(" "),r("li",[e._v("指定方法的 Mvc restful 路由 http://127.0.0.1:9527/restful/123/show")]),e._v(" "),r("li",[e._v("注解路由 http://127.0.0.1:9527/api/v1/petLeevelForApi/helloworld")]),e._v(" "),r("li",[e._v("带有绑定的注解路由 http://127.0.0.1:9527/api/v2/withBind/foobar")]),e._v(" "),r("li",[e._v("php leevel link:public "),r("a",{attrs:{href:"http://127.0.0.1:9527/public/css/page.css",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:9527/public/css/page.css"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("php leevel link:storage "),r("a",{attrs:{href:"http://127.0.0.1:9527/storage/logo.png",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:9527/storage/logo.png"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("php leevel link:apis "),r("a",{attrs:{href:"http://127.0.0.1:9527/apis/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:9527/apis/"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("php leevel link:debugbar "),r("a",{attrs:{href:"http://127.0.0.1:9527/debugbar/debugbar.css",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://127.0.0.1:9527/debugbar/debugbar.css"),r("OutboundLink")],1)])]),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._m(20),e._v(" "),e._m(21),e._v(" "),e._m(22),e._v(" "),r("p",[e._v("笔者的 QueryPHP 项目采用 VirtualBox + Vagrant 搭建的开发环境，跟 Laravel 提供的 Homestead 是一种开发环境,当前开发环境如下:")]),e._v(" "),e._m(23),e._v(" "),r("p",[e._v("建议开发者使用 Laravel "),r("a",{attrs:{href:"https://laravel.com/docs/5.7/homestead/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Homestead"),r("OutboundLink")],1),e._v(" 来搭建 PHP 开发环境蛮不错的，也可以自己维护一套镜像。")]),e._v(" "),e._m(24),e._v(" "),e._m(25),e._v(" "),e._m(26),e._m(27),e._v(" "),e._m(28),e._v(" "),e._m(29),e._m(30),e._v(" "),e._m(31),r("p",[e._v("访问地址")]),e._v(" "),r("ul",[r("li",[e._v("首页 "),r("a",{attrs:{href:"http://queryphp.cn/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://queryphp.cn/"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Mvc 路由 "),r("a",{attrs:{href:"http://queryphp.cn/api/test",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://queryphp.cn/api/test"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Mvc restful 路由 http://queryphp.cn/restful/123")]),e._v(" "),r("li",[e._v("指定方法的 Mvc restful 路由 http://queryphp.cn/restful/123/show")]),e._v(" "),r("li",[e._v("注解路由 http://queryphp.cn/api/v1/petLeevelForApi/helloworld")]),e._v(" "),r("li",[e._v("带有绑定的注解路由 http://queryphp.cn/api/v2/withBind/foobar")]),e._v(" "),r("li",[e._v("php leevel link:public "),r("a",{attrs:{href:"http://queryphp.cn/public/css/page.css",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://queryphp.cn/public/css/page.css"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("php leevel link:storage "),r("a",{attrs:{href:"http://queryphp.cn/storage/logo.png",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://queryphp.cn/storage/logo.png"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("php leevel link:apis "),r("a",{attrs:{href:"http://queryphp.cn/apis/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://queryphp.cn/apis/"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("php leevel link:debugbar "),r("a",{attrs:{href:"http://queryphp.cn/debugbar/debugbar.css",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://queryphp.cn/debugbar/debugbar.css"),r("OutboundLink")],1)])]),e._v(" "),e._m(32),e._v(" "),e._m(33),e._v(" "),e._m(34)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"环境要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境要求","aria-hidden":"true"}},[this._v("#")]),this._v(" 环境要求")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("实际上，QueryPHP 对于环境来说"),t("code",[this._v("只需要")]),this._v("安装一个 "),t("code",[this._v("PHP 7.1.3")]),this._v(" 及以上版本即可，这个时候甚至无需安装 Nginx 而使用 PHP 内置 webserver 即可将 QueryPHP 跑起来。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"国内镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#国内镜像","aria-hidden":"true"}},[this._v("#")]),this._v(" 国内镜像")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("composer config -g repo.packagist composer https://packagist.phpcomposer.com\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("composer config -g repo.packagist composer https://packagist.laravel-china.org\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"composer-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#composer-安装","aria-hidden":"true"}},[this._v("#")]),this._v(" Composer 安装")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("你可以在终端中运行 "),t("code",[this._v("create-project")]),this._v(" 命令来安装 QueryPHP.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"安装-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("composer create-project --prefer-dist hunzhiwange/queryphp myapp\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("composer create-project hunzhiwange/queryphp myapp dev-master\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行","aria-hidden":"true"}},[this._v("#")]),this._v(" 运行")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("php leevel server <Visite http://127.0.0.1:9527/>\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),t("p",[this._v("QueryPHP 在 composer 安装过程中自动运行了创建软连接的命令将一些非 web 根目录的站点映射到根目录，\n这样我们可以使用内置的服务来访问这些链接。这些服务包含: 公共资源（public）、上传文件（storage）、\nSwagger Api（apis）、Debugbar 调试（debugbar）。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"基础配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 基础配置")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("QueryPHP 在初始化应用程序会自动帮您创建 "),t("code",[this._v(".env")]),this._v(" 和 "),t("code",[this._v("phinx.yml")]),this._v(" 文件。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v(".env (系统配置文件)")]),this._v(" "),t("li",[this._v("phinx.yml (Phinx 数据库迁移命令配置，与 .env 独立)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"入口目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入口目录","aria-hidden":"true"}},[this._v("#")]),this._v(" 入口目录")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("您必须将 web 站点的根目录指向 "),t("code",[this._v("www")]),this._v(" 目录，其中 "),t("code",[this._v("index.php")]),this._v(" 是整个应用的单一入口文件，例如 Nginx。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("root /data/codes/queryphp/www;\nindex index.html index.php;\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"目录权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#目录权限","aria-hidden":"true"}},[this._v("#")]),this._v(" 目录权限")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("系统有两个目录需要配置写入权限 "),t("code",[this._v("storage")]),this._v(" 和 "),t("code",[this._v("runtime")]),this._v(",一个是资源上传目录，例外一个是系统运行过程中的缓存。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"搭建站点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建站点","aria-hidden":"true"}},[this._v("#")]),this._v(" 搭建站点")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[e._v("Macos High Sierra 10.13.2")]),e._v(" "),r("li",[e._v("Atom with vim plugin、Subtime text3")]),e._v(" "),r("li",[e._v("VirtualBox 5.2.8")]),e._v(" "),r("li",[e._v("Vagrant")]),e._v(" "),r("li",[e._v("ubuntu-16.04-LTS")]),e._v(" "),r("li",[e._v("mysql-5.6.28")]),e._v(" "),r("li",[e._v("nginx-1.6.2")]),e._v(" "),r("li",[e._v("php-5.6.23")]),e._v(" "),r("li",[e._v("php-7.1.6")]),e._v(" "),r("li",[e._v("php-7.2.1")]),e._v(" "),r("li",[e._v("redis-2.8.17")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("首先需要在 ubuntu 虚拟机创建一个站点的配置文件,例如 "),t("code",[this._v("/server/nginx-1.6.2/vhosts/queryphp.conf")]),this._v(":")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("server {\n    add_header HostName php7.2.1-app1;\n    listen 8080;\n    server_name queryphp.cn  *.queryphp.cn;\n    error_log  /var/log/nginx/queryphp.error.log;\n    access_log /var/log/nginx/queryphp.access.log main;\n    root /data/codes/queryphp/www;\n    index  index.html index.php;\n\n    location / {\n       try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass 127.0.0.1:9000;\n        fastcgi_index index.php;\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    }\n\n    location ~ /nginx_status$ {\n        stub_status on;\n        access_log off;\n        allow  all;\n    }\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),t("p",[this._v("笔者因为会在 Mac 中将端口转发到虚拟机中的 8080 端口，您的开发环境直接配置 80 端口即可。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("修改虚拟机 "),t("code",[this._v("/etc/hosts")]),this._v(",添加几个测试域名，后面 "),t("code",[this._v("vip")]),this._v(" 这些主要用于调试路由域名匹配，可以不要 。\nMac 系统的 "),t("code",[this._v("/etc/hosts")]),this._v(" 也需要添加这些如下域名。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("127.0.0.1      queryphp.cn\n127.0.0.1      www.queryphp.cn\n127.0.0.1      test.queryphp.cn\n127.0.0.1      vip.queryphp.cn\n127.0.0.1      x.vip.queryphp.cn\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("重启 "),t("code",[this._v("Nginx")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("service nginx restart\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"apache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apache","aria-hidden":"true"}},[this._v("#")]),this._v(" Apache")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Web 根目录已经内置了 "),t("code",[this._v("www/.htaccess")]),this._v(" 文件来为隐藏 index.php,需要启用 mod_rewrite 模块。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("<IfModule mod_rewrite.c>\n    <IfModule mod_negotiation.c>\n        Options -MultiViews -Indexes\n    </IfModule>\n\n    RewriteEngine On\n\n    RewriteCond %{HTTP:Authorization} .\n    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]\n\n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]\n</IfModule>\n")])])])}],!1,null,null,null);a.options.__file="install.md";t.default=a.exports}}]);